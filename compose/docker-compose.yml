version: "3.9"

services:
  rest-api-prod:
    image: ghcr.io/stefanelul2000/ethical-hacking-apps-docker:rest-api-prod
    container_name: eha-rest-api-prod
    restart: unless-stopped
    environment:
      SERVICE_VARIANT: rest-api
      REPO_URL: https://github.com/stefanelul2000/ethical-hacking-apps.git
      REPO_BRANCH: master
      PROJECT_SUBDIR: rest-api
      UVICORN_HOST: 0.0.0.0
      UVICORN_PORT: 8000
      UVICORN_RELOAD: "0"
      UPLOAD_BASIC_AUTH_USERNAME: uploader
      UPLOAD_BASIC_AUTH_PASSWORD: upload-secret
      UPLOAD_MAX_STORAGE_PER_USER: 52428800
      UPLOAD_MAX_STORAGE_GLOBAL: 524288000
      UPLOAD_RATE_WINDOW_SECONDS: 60
      UPLOAD_RATE_MAX_REQUESTS: 30
      UPLOAD_TTL_SECONDS: 604800
    ports:
      - 8000:8000
  rest-api-dev:
    image: ghcr.io/stefanelul2000/ethical-hacking-apps-docker:rest-api-dev
    container_name: eha-rest-api-dev
    restart: unless-stopped
    environment:
      SERVICE_VARIANT: rest-api
      REPO_URL: https://github.com/stefanelul2000/ethical-hacking-apps.git
      REPO_BRANCH: arh
      PROJECT_SUBDIR: rest-api
      UVICORN_HOST: 0.0.0.0
      UVICORN_PORT: 8000
      UVICORN_RELOAD: "0"
      UPLOAD_BASIC_AUTH_USERNAME: uploader
      UPLOAD_BASIC_AUTH_PASSWORD: upload-secret
      UPLOAD_MAX_STORAGE_PER_USER: 52428800
      UPLOAD_MAX_STORAGE_GLOBAL: 524288000
      UPLOAD_RATE_WINDOW_SECONDS: 60
      UPLOAD_RATE_MAX_REQUESTS: 30
      UPLOAD_TTL_SECONDS: 604800
    ports:
      - 8005:8000

  ai-mcp-client-prod:
    image: ghcr.io/stefanelul2000/ethical-hacking-apps-docker:ai-mcp-client-prod
    container_name: eha-mcp-client-prod
    restart: unless-stopped
    environment:
      SERVICE_VARIANT: mcp-client
      REPO_URL: https://github.com/stefanelul2000/ethical-hacking-apps.git
      REPO_BRANCH: master
      UVICORN_HOST: 0.0.0.0
      UVICORN_PORT: 8000
      UVICORN_RELOAD: "0"
      MCP_ADMIN_USER: admin
      MCP_ADMIN_PASS: changeme
      GROQ_MODEL: llama-3.1-8b-instruct
      GROQ_API_KEY: CHANGE_ME
    ports:
      - 8001:8000

  ai-mcp-client-dev:
    image: ghcr.io/stefanelul2000/ethical-hacking-apps-docker:ai-mcp-client-dev
    container_name: eha-mcp-client-dev
    restart: unless-stopped
    environment:
      SERVICE_VARIANT: mcp-client
      REPO_URL: https://github.com/stefanelul2000/ethical-hacking-apps.git
      REPO_BRANCH: arh
      UVICORN_HOST: 0.0.0.0
      UVICORN_PORT: 8000
      UVICORN_RELOAD: "0"
      MCP_ADMIN_USER: admin
      MCP_ADMIN_PASS: changeme
      GROQ_MODEL: llama-3.1-8b-instruct
      GROQ_API_KEY: CHANGE_ME
    ports:
      - 8002:8000

  ai-mcp-server-prod:
    image: ghcr.io/stefanelul2000/ethical-hacking-apps-docker:ai-mcp-server-prod
    container_name: eha-mcp-server-prod
    restart: unless-stopped
    environment:
      SERVICE_VARIANT: mcp-server
      REPO_URL: https://github.com/stefanelul2000/ethical-hacking-apps.git
      REPO_BRANCH: master
      ENABLE_MCP_COMMAND_TOOL: "0"
    ports:
      - 8003:8001

  ai-mcp-server-dev:
    image: ghcr.io/stefanelul2000/ethical-hacking-apps-docker:ai-mcp-server-dev
    container_name: eha-mcp-server-dev
    restart: unless-stopped
    environment:
      SERVICE_VARIANT: mcp-server
      REPO_URL: https://github.com/stefanelul2000/ethical-hacking-apps.git
      REPO_BRANCH: arh
      ENABLE_MCP_COMMAND_TOOL: "0"
    ports:
      - 8004:8001

  iris-prod:
    image: ghcr.io/stefanelul2000/ethical-hacking-apps-docker:iris-prod
    container_name: eha-iris-prod
    restart: unless-stopped
    environment:
      SERVICE_VARIANT: iris
      REPO_URL: https://github.com/stefanelul2000/ethical-hacking-apps.git
      REPO_BRANCH: master
    working_dir: /srv/app/ai/iris
    ports:
      - 8101:8001

  iris-dev:
    image: ghcr.io/stefanelul2000/ethical-hacking-apps-docker:iris-dev
    container_name: eha-iris-dev
    restart: unless-stopped
    environment:
      SERVICE_VARIANT: iris
      REPO_URL: https://github.com/stefanelul2000/ethical-hacking-apps.git
      REPO_BRANCH: arh
    working_dir: /srv/app/ai/iris
    ports:
      - 8102:8001
